<ion-header>
  <ion-toolbar color="dark">
    <ion-title>Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" color="dark">
  <div class="profile-container">
    <!-- Sección de imagen de perfil -->
    <div class="profile-header">
      <ion-avatar class="profile-avatar" (click)="triggerFileInput()"> <!-- Hacer clic en el avatar para subir imagen -->
        <img [src]="imagenPerfil || 'assets/avatar-placeholder.png'" alt="avatar"> <!-- Mostrar imagen o placeholder -->
        <ion-icon name="create-outline" class="edit-icon" (click)="triggerFileInput()"></ion-icon> <!-- Ícono de lápiz en la esquina -->
      </ion-avatar>
    </div>

    <!-- Información del usuario -->
    <div class="profile-info">
      <h2 *ngIf="usuario.username">{{ usuario.username }}</h2> <!-- Mostrar el username si existe -->
      <p *ngIf="usuario.nombre && usuario.apellido">{{ usuario.nombre }} {{ usuario.apellido }}</p> <!-- Mostrar el nombre completo si existen -->
    </div>

    <!-- Input de archivo oculto para seleccionar la imagen -->
    <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*" style="display:none;" />

    <!-- Botón para guardar la imagen de perfil -->
    <ion-button expand="block" fill="solid" color="success" (click)="guardarImagen()">
      <ion-icon name="save-outline" slot="start"></ion-icon>
      Guardar Imagen de Perfil
    </ion-button>

    <!-- Sección de botones de acción -->
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <ion-button expand="block" fill="outline" color="primary" (click)="editarPerfil()">
            <ion-icon name="create-outline" slot="start"></ion-icon>
            Editar Perfil
          </ion-button>
        </ion-col>
        <ion-col size="6">
          <ion-button expand="block" fill="outline" color="secondary" (click)="verHistorial()">
            <ion-icon name="time-outline" slot="start"></ion-icon>
            Historial
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="6">
          <ion-button expand="block" fill="outline" color="tertiary" (click)="ajustes()">
            <ion-icon name="settings-outline" slot="start"></ion-icon>
            Ajustes
          </ion-button>
        </ion-col>
        <ion-col size="6">
          <ion-button expand="block" fill="outline" color="danger" (click)="seguridad()">
            <ion-icon name="shield-checkmark-outline" slot="start"></ion-icon>
            Seguridad
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Botón de cerrar sesión -->
    <ion-button expand="block" color="danger" (click)="cerrarSesion()" class="logout-btn">
      <ion-icon name="log-out-outline" slot="start"></ion-icon>
      Cerrar Sesión
    </ion-button>
  </div>
</ion-content>
